{"version":3,"file":"main-Czo7xaAr.js","sources":["../../src/main.js"],"sourcesContent":["// Регистрируем плагины сразу\ngsap.registerPlugin(ScrollTrigger);\n\nwindow.addEventListener('load', () => {\n    \n    // 0. Скрываем прелоадер (если есть)\n    const preloader = document.getElementById('preloader');\n    if (preloader) {\n        gsap.to(preloader, {\n            opacity: 0,\n            duration: 0.5,\n            onComplete: () => preloader.style.display = 'none'\n        });\n    }\n\n    initApp();\n});\n\nfunction initApp() {\n    \n    // --- 1. Инициализация иконок ---\n    if (typeof lucide !== 'undefined') {\n        lucide.createIcons();\n    }\n\n    // --- 2. Плавный скролл (Lenis) ---\n    const lenis = new Lenis({\n        duration: 1.2,\n        easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n        smooth: true,\n    });\n\n    function raf(time) {\n        lenis.raf(time);\n        requestAnimationFrame(raf);\n    }\n    requestAnimationFrame(raf);\n\n\n    // --- 3. Анимация Текста (SplitType) ---\n    // Находим все элементы с классом\n    const splitElements = document.querySelectorAll('.split-text');\n\n    splitElements.forEach((element) => {\n        // 1. Разбиваем текст\n        const split = new SplitType(element, { \n            types: 'lines, words',\n            lineClass: 'line',\n            wordClass: 'word'\n        });\n\n        // 2. Сразу скрываем слова через GSAP (чтобы не было видно до анимации)\n        gsap.set(split.words, { y: 30, opacity: 0 });\n\n        // 3. Запускаем анимацию для каждого блока отдельно\n        gsap.to(split.words, {\n            scrollTrigger: {\n                trigger: element,\n                start: 'top 85%', // Начинать, когда верх элемента на 85% высоты экрана\n                toggleActions: 'play none none reverse' // Проигрывать при скролле вниз, реверс при скролле вверх\n            },\n            y: 0,\n            opacity: 1,\n            duration: 0.8,\n            stagger: 0.05, // Задержка между словами\n            ease: 'power3.out'\n        });\n    });\n\n\n    // --- 4. Общая анимация появления блоков (Fade Up) ---\n    const fadeElements = document.querySelectorAll('.fade-up, .fade-in, .fade-left, .fade-right');\n    \n    fadeElements.forEach(el => {\n        // Определяем направление на основе класса\n        let xVal = 0;\n        let yVal = 0;\n        \n        if (el.classList.contains('fade-up')) yVal = 40;\n        if (el.classList.contains('fade-left')) xVal = -40;\n        if (el.classList.contains('fade-right')) xVal = 40;\n\n        // Начальное состояние\n        gsap.set(el, { opacity: 0, y: yVal, x: xVal });\n\n        // Анимация\n        gsap.to(el, {\n            scrollTrigger: {\n                trigger: el,\n                start: 'top 90%',\n            },\n            opacity: 1,\n            y: 0,\n            x: 0,\n            duration: 0.8,\n            delay: el.dataset.delay || 0, // Если есть data-delay\n            ease: 'power3.out'\n        });\n    });\n\n\n    // --- 5. Анимация счетчиков ---\n    const counters = document.querySelectorAll('.counter');\n    counters.forEach(counter => {\n        const target = +counter.getAttribute('data-target');\n        \n        // Объект для анимации значения\n        let obj = { val: 0 };\n        \n        gsap.to(obj, {\n            val: target,\n            scrollTrigger: {\n                trigger: counter,\n                start: 'top 85%',\n            },\n            duration: 2,\n            ease: 'power2.out',\n            onUpdate: function() {\n                counter.innerText = Math.ceil(obj.val);\n            }\n        });\n    });\n\n\n    // --- 6. Хедер и меню ---\n    const burger = document.querySelector('.header__burger');\n    const nav = document.querySelector('.header__nav');\n    \n    if (burger) {\n        burger.addEventListener('click', () => {\n            nav.classList.toggle('active');\n            burger.classList.toggle('active');\n        });\n        \n        document.querySelectorAll('.header__link').forEach(link => {\n            link.addEventListener('click', () => {\n                nav.classList.remove('active');\n                burger.classList.remove('active');\n                // Скролл через Lenis\n                const href = link.getAttribute('href');\n                lenis.scrollTo(href);\n            });\n        });\n    }\n\n    // --- 7. Three.js (Фон Hero) ---\n    try {\n        initThreeJs();\n    } catch (e) {\n        console.log(\"Three.js skipped for performance or error\");\n    }\n\n    // ВАЖНО: Обновляем ScrollTrigger после того, как SplitType изменил DOM\n    ScrollTrigger.refresh();\n}\n\n\n// --- Функция Three.js вынесена отдельно ---\nfunction initThreeJs() {\n    const canvasContainer = document.getElementById('hero-canvas');\n    if (!canvasContainer) return;\n\n    const scene = new THREE.Scene();\n    const camera = new THREE.PerspectiveCamera(75, canvasContainer.clientWidth / canvasContainer.clientHeight, 0.1, 1000);\n    const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n    \n    renderer.setSize(canvasContainer.clientWidth, canvasContainer.clientHeight);\n    canvasContainer.appendChild(renderer.domElement);\n\n    // Частицы\n    const particlesCount = 80; // Меньше частиц для стабильности\n    const particlesGeometry = new THREE.BufferGeometry();\n    const posArray = new Float32Array(particlesCount * 3);\n    \n    for(let i = 0; i < particlesCount * 3; i++) {\n        posArray[i] = (Math.random() - 0.5) * 10;\n    }\n    particlesGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));\n    const particlesMaterial = new THREE.PointsMaterial({ size: 0.05, color: 0x6366F1, transparent: true, opacity: 0.8 });\n    const particlesMesh = new THREE.Points(particlesGeometry, particlesMaterial);\n    scene.add(particlesMesh);\n\n    camera.position.z = 5;\n\n    const animate = () => {\n        requestAnimationFrame(animate);\n        particlesMesh.rotation.y += 0.001;\n        renderer.render(scene, camera);\n    };\n    animate();\n\n    window.addEventListener('resize', () => {\n        camera.aspect = canvasContainer.clientWidth / canvasContainer.clientHeight;\n        camera.updateProjectionMatrix();\n        renderer.setSize(canvasContainer.clientWidth, canvasContainer.clientHeight);\n    });\n}"],"names":["preloader","initApp","lenis","t","raf","time","element","split","el","xVal","yVal","counter","target","obj","burger","nav","link","href","initThreeJs","canvasContainer","scene","camera","renderer","particlesCount","particlesGeometry","posArray","i","particlesMaterial","particlesMesh","animate"],"mappings":"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"}